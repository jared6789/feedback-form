<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>公寓入住须知与问题反馈</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* 隐藏滚动条但保留滚动功能 */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-2 sm:p-6 lg:p-8">

    <main class="w-full max-w-4xl bg-gray-200/50 rounded-2xl shadow-2xl p-4 sm:p-6 lg:p-8 space-y-8 backdrop-blur-sm border border-white/30">
        
        <!-- 第一块：入住须知 -->
        <div class="bg-white rounded-xl shadow-lg p-4 sm:p-8">
            <div class="text-center mb-6">
                <h1 class="text-3xl font-bold text-gray-800">入住须知</h1>
                <p class="text-gray-500 mt-2">请仔细阅读入住须知，有任何意见、问题请在下方表单提交。</p>
            </div>
            <div class="w-full h-[55vh] sm:h-[600px] border rounded-lg overflow-hidden flex justify-center">
                <!-- 将Google Drive链接的view替换为preview以嵌入 -->
                <iframe src="https://drive.google.com/file/d/1Aqn6pO2p5i6ppYknyCpkEQxXv8R2W-eV/preview" class="w-full h-full" frameborder="0"></iframe>
            </div>
        </div>

        <!-- 第二块：问题与维修反馈 -->
        <div class="w-full bg-white rounded-xl shadow-lg p-4 sm:p-8">
            <!-- 头部标题 -->
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800">问题与维修反馈</h1>
                <p class="text-gray-500 mt-2">请填写您遇到的问题，我们会尽快处理。</p>
            </div>

            <!-- 成功提交后的提示信息，默认隐藏 -->
            <div id="success-message" class="hidden bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-md mb-6" role="alert">
                <p class="font-bold">提交成功！</p>
                <p>感谢您的反馈，我们会尽快处理您的问题。</p>
            </div>

            <!-- 表单 -->
            <form 
              id="feedback-form" 
              class="space-y-6"
              action="https://docs.google.com/forms/d/e/1FAIpQLSefnqH4lPHcVqQzpbr8QNeH0_s_UadtcE0uyCH2n2ZRNFFn9A/formResponse" 
              method="POST"
              target="hidden_iframe"
            >
                
                <!-- 房间号 -->
                <div>
                    <label for="room-number" class="block text-sm font-semibold text-gray-700 mb-1">房间号 <span class="text-red-500">*</span></label>
                    <input type="text" id="room-number" name="entry.199738018" placeholder="房间门口数字编号" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow">
                </div>

                <!-- 问题类型 -->
                <div>
                    <label for="issue-type" class="block text-sm font-semibold text-gray-700 mb-1">问题类型 <span class="text-red-500">*</span></label>
                    <select id="issue-type" name="entry.1224683595" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow bg-white">
                        <option value="" disabled selected>请选择问题类型</option>
                        <option value="水管/卫浴">水管/卫浴</option>
                        <option value="电路/电器">电路/电器</option>
                        <option value="家具损坏">家具损坏</option>
                        <option value="网络问题">网络问题</option>
                        <option value="卫生问题">卫生问题</option>
                        <option value="其他问题">其他问题</option>
                    </select>
                </div>

                <!-- 详细问题描述 -->
                <div>
                    <label for="issue-description" class="block text-sm font-semibold text-gray-700 mb-1">详细问题描述 <span class="text-red-500">*</span></label>
                    <textarea id="issue-description" name="entry.1565250917" rows="4" placeholder="请详细描述您遇到的问题，例如具体位置、损坏情况等。" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow"></textarea>
                </div>

                <!-- 紧急程度 (已修正) -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">紧急程度 <span class="text-red-500">*</span></label>
                    <div class="flex items-center space-x-6">
                        <label class="flex items-center">
                            <input type="radio" name="entry.1098750134" value="低" required class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                            <span class="ml-2 text-gray-700">低</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="entry.1098750134" value="中" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                            <span class="ml-2 text-gray-700">中</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="entry.1098750134" value="高" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                            <span class="ml-2 text-gray-700">高</span>
                        </label>
                    </div>
                </div>

                <!-- 分割线 -->
                <div class="border-t border-gray-200"></div>

                <!-- 选填项 -->
                <h3 class="text-lg font-semibold text-gray-800 pt-2">选填信息</h3>

                <!-- 姓名 -->
                <div>
                    <label for="user-name" class="block text-sm font-semibold text-gray-700 mb-1">您的姓名</label>
                    <input type="text" id="user-name" name="entry.1119563259" placeholder="方便我们与您联系" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow">
                </div>

                <!-- 联系方式 -->
                <div>
                    <label for="contact-info" class="block text-sm font-semibold text-gray-700 mb-1">联系电话/邮箱</label>
                    <input type="text" id="contact-info" name="entry.1691231818" placeholder="方便我们与您联系" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow">
                </div>

                <!-- 提交按钮 -->
                <div class="pt-4">
                    <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-300 transform hover:scale-105">
                        提交反馈
                    </button>
                </div>
            </form>
        </div>
    </main>

    <!-- 用于在后台提交表单到Google Forms，避免页面跳转 -->
    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

    <script>
        const form = document.getElementById('feedback-form');
        const successMessage = document.getElementById('success-message');
        const hiddenIframe = document.getElementById('hidden_iframe');
        let formSubmitted = false;

        // 监听表单提交事件
        form.addEventListener('submit', function() {
            formSubmitted = true;
        });
        
        // 监听iframe加载完成事件
        hiddenIframe.addEventListener('load', function () {
            // 只有在表单确实被提交后才执行
            if (formSubmitted) {
                // 显示成功消息
                successMessage.classList.remove('hidden');
                // 滚动到页面顶部以显示消息
                window.scrollTo(0, 0);

                // 重置表单
                form.reset();

                // 5秒后自动隐藏成功消息
                setTimeout(() => {
                    successMessage.classList.add('hidden');
                }, 5000);
                
                // 重置提交状态
                formSubmitted = false;
            }
        });
    </script>
</body>
</html>


